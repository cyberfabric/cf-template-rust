server:
  home_dir: "~/.hyperspot"

# Logging configuration (global section)
logging:
  # global section
  default:
    console_level: info
    file: "logs/cyberfabric.log"
    file_level: info
    max_age_days: 28
    max_backups: 3
    max_size_mb: 10


# Per-module configurations using new structure
modules:
  hello-world:
    metadata:
      package: "hello-world"
    config: {}

# OpenTelemetry tracing configuration
tracing:
  enabled: false
  service_name: "cyberfabric-api"

  # OTLP exporter configuration
  exporter:
    kind: "otlp_grpc"  # or "otlp_http"
    endpoint: "http://127.0.0.1:14317"  # Jaeger OTLP gRPC endpoint
    # For HTTP: endpoint: "http://127.0.0.1:4318/v1/traces"
    headers:
      # Add any required headers, e.g., for authentication
      # authorization: "Bearer your-token"
      uptrace-dsn: "http://project1_secret@localhost:14318?grpc=14317"
    timeout_ms: 5000

  # Sampling configuration
  sampler:
    parent_based_ratio: # parent_based_always_on | parent_based_ratio | always_on | always_off
      ratio: 0.8  # Sample 20% of traces (only used with ratio strategies)

  # Propagation configuration
  propagation:
    w3c_trace_context: true  # Enable W3C Trace Context propagation

  # Resource attributes (added to all spans)
  resource:
    service.version: "0.0.1"
    deployment.environment: "dev"
    service.namespace: "cf"

  # HTTP-specific options
  http:
    inject_request_id_header: "x-request-id"
    record_headers: [ "user-agent", "x-forwarded-for" ]

  # Log correlation (future feature)
  logs_correlation:
    inject_trace_ids_into_logs: true
